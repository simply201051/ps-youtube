!function(e,t,n){"use strict";function o(){function e(e){a.players.push(e)}function t(){return"youtube-"+ ++o}function n(){a.players.forEach(function(e){1===e.state&&e.pauseVideo()})}var o=0,a={addPlayer:e,newElementId:t,players:[],pausePlayingVideo:n,ready:!1};return a}function a(t){function n(n,o,a){function r(a){function r(e){e.target.playVideo()}function u(e){var o=e.data;1===o&&t.pausePlayingVideo(),n.player.state=o,n.$emit("youtube.stateChange")}if(t.ready){var i=t.newElementId(),d=e.element('<div id="'+i+'"></div>'),l=e.extend({autoplay:1,rel:0},n.playerOptions);o.empty(),o.append(d),n.player=function(e){var o=new YT.Player(e,{videoId:n.videoId,playerVars:l,events:{onReady:r,onStateChange:u}});return t.addPlayer(o),o}(i)}}var u=function(){var t=-1!==["mq","hq","sd","max"].indexOf(a.videoQuality)?a.videoQuality+"default.jpg":"sddefault.jpg",o="//img.youtube.com/vi/"+n.videoId+"/"+t,r=n.videoName||"youtube video";return e.element('<img src="'+o+'" alt="'+r+'">')}();o.addClass("youtube-container"),o.append(u),function(){o.bind("click",r)}()}return{restrict:"EA",scope:{player:"=psYoutube",playerOptions:"=playerOptions",videoId:"=",videoName:"="},template:'<button class="play-button"></button>',link:n}}function r(o,a){!function(){var e=t.createElement("script");e.src="https://www.youtube.com/iframe_api";var o=t.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o),n.onYouTubeIframeAPIReady=function(){a.ready=!0}}(),function(){var n=e.element('<style type="text/css">.youtube-container{position:relative;display:block;padding-top:56.25%;background-color:#000;overflow:hidden}.youtube-container .play-button{width:90px;height:60px;background-color:#333;box-shadow:0 0 30px rgba(0,0,0,.6);z-index:1;opacity:.8;border-radius:6px}.youtube-container img{width:100%;top:-16.82%;left:0;opacity:.7}.youtube-container .play-button:before{content:"";border-style:solid;border-width:15px 0 15px 26px;border-color:transparent transparent transparent #fff}.youtube-container .play-button,.youtube-container img{cursor:pointer}.youtube-container .play-button,.youtube-container .play-button:before,.youtube-container iframe,.youtube-container img{position:absolute}.youtube-container .play-button,.youtube-container .play-button:before{top:50%;left:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%)}.youtube-container iframe{height:100%;width:100%;top:0;left:0}</style>');e.element(t).find("head").append(n)}()}e.module("ps-youtube",[]).factory("youtubePlayer",o).directive("psYoutube",a).run(r),a.$inject=["youtubePlayer"],r.$inject=["$rootScope","youtubePlayer"]}(angular,document,window);